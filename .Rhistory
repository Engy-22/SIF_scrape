html_text()
line = str_split_fixed(line, " ", 2)
test = c(i, team, short, line)
test
i = ids[2]
team = html %>%
html_nodes(paste("#", i,  " .sb-team-short", sep = "")) %>%
html_text()
short = html %>%
html_nodes(paste("#", i,  " .sb-team-abbrev", sep = "")) %>%
html_text()
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
datetime = html %>%
html_nodes(paste("#", i,  " .date-time", sep = "")) %>%
html_text()
score = html %>%
html_nodes(paste("#", i,  " .total", sep = "")) %>%
html_text()
test2 = c(i, team, short, line)
test
test2
rbind(test, test2)
for(i in ids){
team = html %>%
html_nodes(paste("#", i,  " .sb-team-short", sep = "")) %>%
html_text()
short = html %>%
html_nodes(paste("#", i,  " .sb-team-abbrev", sep = "")) %>%
html_text()
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
datetime = html %>%
html_nodes(paste("#", i,  " .date-time", sep = "")) %>%
html_text()
score = html %>%
html_nodes(paste("#", i,  " .total", sep = "")) %>%
html_text()
line = str_split_fixed(line, " ", 2)
i = c(i, team, short, line)
out = rbind(out, i)
}
games = data.frame()
colnames(games) = c("home", "away", "home_short", "away_short", "favorite", "spread")
N <- 10  # some magic number, possibly an overestimate
DF <- data.frame(num=rep(NA, N), txt=rep("", N),  # as many cols as you need
stringsAsFactors=FALSE)
DF
DF[i, ] <- list(1.4, "foo")
DF
N <- 1e4  # some magic number, possibly an overestimate
DF <- data.frame(num=rep(NA, N), txt=rep("", N),  # as many cols as you need
stringsAsFactors=FALSE)
DF
games = NULL
for(i in ids){
team = html %>%
html_nodes(paste("#", i,  " .sb-team-short", sep = "")) %>%
html_text()
short = html %>%
html_nodes(paste("#", i,  " .sb-team-abbrev", sep = "")) %>%
html_text()
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
datetime = html %>%
html_nodes(paste("#", i,  " .date-time", sep = "")) %>%
html_text()
score = html %>%
html_nodes(paste("#", i,  " .total", sep = "")) %>%
html_text()
line = str_split_fixed(line, " ", 2)
i = c(i, team, short, line)
games = rbind(games, i)
}
games
as.data.frame(games)
ids = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
ids = ids[!is.na(ids)]
ids = as.integer(ids)
games = NULL
for(i in ids){
team = html %>%
html_nodes(paste("#", i,  " .sb-team-short", sep = "")) %>%
html_text()
short = html %>%
html_nodes(paste("#", i,  " .sb-team-abbrev", sep = "")) %>%
html_text()
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
datetime = html %>%
html_nodes(paste("#", i,  " .date-time", sep = "")) %>%
html_text()
score = html %>%
html_nodes(paste("#", i,  " .total", sep = "")) %>%
html_text()
line = str_split_fixed(line, " ", 2)
c(i, team, short, line)
games = as.data.frame(rbind(games, c(i, team, short, line)))
}
games
games = NULL
for(i in ids){
team = html %>%
html_nodes(paste("#", i,  " .sb-team-short", sep = "")) %>%
html_text()
short = html %>%
html_nodes(paste("#", i,  " .sb-team-abbrev", sep = "")) %>%
html_text()
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
datetime = html %>%
html_nodes(paste("#", i,  " .date-time", sep = "")) %>%
html_text()
score = html %>%
html_nodes(paste("#", i,  " .total", sep = "")) %>%
html_text()
line = str_split_fixed(line, " ", 2)
c(i, team, short, line)
games = rbind(games, c(i, team, short, line))
}
games
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
line
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]))
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]))
ids = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
ids = ids[!is.na(ids)]
ids = as.integer(ids)
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]))
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]))
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
# bind scrapes into dataframe
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
colnames(spreads) = c("away", "home", "away_short", "home_short")
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
spreads$spread = gsub("NA", "", spreads$spread)
spreads$spread = abs(as.numeric(spreads$spread))
spreads[is.na(spreads)] = ""
spreads$games = paste(spreads$away, spreads$home)
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]))
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]))
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
# bind scrapes into dataframe
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spreads
# bind scrapes into dataframe
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
colnames(spreads) = c("game_id", "away", "home", "away_short", "home_short")
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
spreads$spread = gsub("NA", "", spreads$spread)
spreads$spread = abs(as.numeric(spreads$spread))
spreads[is.na(spreads)] = ""
spreads$games = paste(spreads$away, spreads$home)
spreads
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
colnames(spreads) = c("game_id", "away", "home", "away_short", "home_short")
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
spreads$spread = gsub("NA", "", spreads$spread)
spreads$spread = abs(as.numeric(spreads$spread))
spreads[is.na(spreads)] = ""
spreads
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]))
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]))
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
# bind scrapes into dataframe
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spreads
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]))
str(games)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
str(game_id)
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id = as.integer(game_id)
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spreads
games
shorts
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.na(game_id)]
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = ids[!is.n
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id
game_id = as.integer(game_id)
game_id
game_id = ids[!is.na(game_id)]
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id
str(game_id)
101-92
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = !is.na(game_id)
game_id
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = id[!is.na(game_id)]
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = na.omit(game_id)
game_id = as.integer(game_id)
game_id
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(teams_raw[c(TRUE,FALSE)], teams_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(shorts_raw[c(TRUE,FALSE)], shorts_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = na.omit(game_id)
game_id = as.integer(game_id)
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spreads
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
games = as.data.frame(cbind(away = teams_raw[c(TRUE,FALSE)],
home = teams_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(away_short = shorts_raw[c(TRUE,FALSE)],
home_short = shorts_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = na.omit(game_id)
game_id = as.integer(game_id)
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spreads
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
spread
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
spread$favorite = spread$V1
# bind scrapes into dataframe
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
spreads$spread = gsub("NA", "", spreads$spread)
spreads$spread = abs(as.numeric(spreads$spread))
spreads[is.na(spreads)] = ""
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
spread$favorite = spread$V1
spread
# bind scrapes into dataframe
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = na.omit(game_id)
game_id = as.integer(game_id)
spreads = as.data.frame(cbind(game_id, games, shorts), stringsAsFactors = FALSE)
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2))
# bind scrapes into dataframe
spreads = merge(spreads, spread, by.x = c("away_short"), by.y = c("V1"), all.x = TRUE)
spreads = merge(spreads, spread, by.x = c("home_short"), by.y = c("V1"), all.x = TRUE)
spreads = unite(spreads, spread, c("V2.x", "V2.y"), sep="")
spreads$spread = gsub("NA", "", spreads$spread)
spreads$spread = abs(as.numeric(spreads$spread))
spreads[is.na(spreads)] = ""
spreads
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread_raw
# scrape week
teams_raw = html %>%
html_nodes(".sb-team-short") %>%
html_text()
teams = as.data.frame(cbind(away = teams_raw[c(TRUE,FALSE)],
home = teams_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
shorts_raw = html %>%
html_nodes(".sb-team-abbrev") %>%
html_text()
shorts = as.data.frame(cbind(away_short = shorts_raw[c(TRUE,FALSE)],
home_short = shorts_raw[c(FALSE,TRUE)]),
stringsAsFactors = FALSE)
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
game_id = na.omit(game_id)
game_id = as.integer(game_id)
games = as.data.frame(cbind(game_id, teams, shorts), stringsAsFactors = FALSE)
games
games[pmin( match( spread$V1 , games$away_short), match(spread$V2, games$home_short)),
c("away_short", "home_short")]
favorites = spread$V1
favorites
spread_raw = html %>%
html_nodes(".line") %>%
html_text()
spread = as.data.frame(str_split_fixed(spread_raw, " ", 2),
stringsAsFactors = FALSE)
favorites = spread$V1
favorites
game_id
line = html %>%
html_nodes(paste("#", game_id,  " .line", sep = "")) %>%
html_text()
line
lines = NULL
for(i in game_id){
line = html %>%
html_nodes(paste("#", game_id,  " .line", sep = "")) %>%
html_text()
lines[i] = line
}
lines = NULL
for(i in game_id){
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
lines[i] = line
}
lines
game_id[1]
paste("#", i,  " .line", sep = "")
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
line
str(game_id)
str(paste("#", i,  " .line", sep = ""))
html %>%
html_nodes(paste("#", i,  " .line", sep = ""))
ids = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
ids = ids[!is.na(ids)]
ids = as.integer(ids)
i = ids[1]
html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
str(ids)
ids
lines = character(0)
for(i in game_id){
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
lines[i] = line
}
lines
game_id = html %>%
html_nodes(".scoreboard") %>%
html_attr("id")
for(i in game_id) {print("poop")}
for(i in game_id){
line = html %>%
html_nodes(paste("#", i,  " .line", sep = "")) %>%
html_text()
lines[i] = line
}
